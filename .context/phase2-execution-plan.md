# Phase 2å®Ÿè¡Œè¨ˆç”»: ãƒ­ã‚°çµ±ä¸€ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ”¹å–„

## ðŸŽ¯ ç›®æ¨™
1. ãƒ­ã‚°ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆã‚’çµ±ä¸€ã—ã€é€²æ—ãŒä¸€ç›®ã§åˆ†ã‹ã‚‹ã‚ˆã†ã«ã™ã‚‹
2. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ‰¿èªç”»é¢ã§å®Ÿè¡Œäºˆå®šã‚’æ˜Žç¢ºã«ã™ã‚‹
3. ã‚¨ãƒ©ãƒ¼æ™‚ã®çŠ¶æ³ã‚’æŠŠæ¡ã—ã‚„ã™ãã™ã‚‹

## ðŸ“ ã‚¿ã‚¹ã‚¯è©³ç´°

### Task 2.1: ãƒ­ã‚°ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆçµ±ä¸€
**å„ªå…ˆåº¦**: High  
**æƒ³å®šæ™‚é–“**: 1æ™‚é–“

#### ç¾çŠ¶èª¿æŸ»
å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç¾åœ¨ã®ãƒ­ã‚°å‡ºåŠ›ã‚’ç¢ºèª:

```python
# extract.py
logger.info("[Extract] %d/%d %s", index, total_files, path)

# translate.py  
logger.info("[Translate] ãƒãƒƒãƒ %d/%d (ä»¶æ•°=%d)", index, len(batches), len(batch))

# replace.py
logger.info("[Replace] %d/%d %s", index, total_files, path)
```

#### æ”¹å–„æ¡ˆ
**å…±é€šãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’ä½œæˆ**:

```python
# src/log_utils.py (æ–°è¦ä½œæˆ)
def log_progress(stage: str, current: int, total: int, item: str, detail: str = ""):
    """çµ±ä¸€ã•ã‚ŒãŸãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¡¨ç¤º"""
    percentage = int(current / total * 100) if total > 0 else 0
    msg = f"[{stage}] {current}/{total} ({percentage}%) {item}"
    if detail:
        msg += f" - {detail}"
    logger.info(msg)

def log_summary(stage: str, stats: dict):
    """çµ±ä¸€ã•ã‚ŒãŸã‚µãƒžãƒªãƒ¼è¡¨ç¤º"""
    logger.info("=" * 60)
    logger.info(f"[{stage}] Complete")
    logger.info("=" * 60)
    for key, value in stats.items():
        logger.info(f"  {key}: {value}")
    logger.info("=" * 60)
```

#### é©ç”¨ç®‡æ‰€
- [ ] `src/extract.py`: log_progress, log_summaryä½¿ç”¨
- [ ] `src/translate.py`: log_progress, log_summaryä½¿ç”¨
- [ ] `src/replace.py`: log_progress, log_summaryä½¿ç”¨

### Task 2.2: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ‰¿èªç”»é¢æ”¹å–„
**å„ªå…ˆåº¦**: High  
**æƒ³å®šæ™‚é–“**: 1æ™‚é–“

#### ç¾çŠ¶
```yaml
cat >> "$GITHUB_STEP_SUMMARY" << EOF
## ðŸ“Š ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ã‚µãƒžãƒª

| é …ç›® | å€¤ |
|------|------|
| æŠ½å‡ºä»¶æ•° | **${ITEMS}ä»¶** |
| ç·ãƒˆãƒ¼ã‚¯ãƒ³æ•° | **${TOKENS}** |
| å¹³å‡ãƒˆãƒ¼ã‚¯ãƒ³æ•° | **${AVG_TOKENS}** |
EOF
```

#### æ”¹å–„æ¡ˆ
1. **scripts/summarize_tokens.py ã‚’æ‹¡å¼µ**
   - `translation_limit` ã‚’è€ƒæ…®
   - å®Ÿéš›ã«ç¿»è¨³ã•ã‚Œã‚‹ä»¶æ•°ã‚’è¨ˆç®—
   - æŽ¨å®šå‡¦ç†æ™‚é–“ã‚’è¨ˆç®—

2. **ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§è©³ç´°è¡¨ç¤º**
   ```yaml
   ## ðŸ“Š ç¿»è¨³å®Ÿè¡Œã‚µãƒžãƒª
   
   ### æŠ½å‡ºçµæžœ
   - ç·ãƒ•ã‚¡ã‚¤ãƒ«æ•°: 150ä»¶
   - æŠ½å‡ºä»¶æ•°: 450ä»¶
   - ç·ãƒˆãƒ¼ã‚¯ãƒ³æ•°: 12,500
   
   ### ç¿»è¨³å®Ÿè¡Œäºˆå®š
   - ç¿»è¨³ä»¶æ•°: 10ä»¶ï¼ˆ--limit 10æŒ‡å®šï¼‰
   - å¯¾è±¡ãƒˆãƒ¼ã‚¯ãƒ³æ•°: 278ãƒˆãƒ¼ã‚¯ãƒ³
   - æŽ¨å®šãƒãƒƒãƒæ•°: 2ãƒãƒƒãƒ
   - æŽ¨å®šå‡¦ç†æ™‚é–“: ç´„30ç§’
   
   ### è¨­å®š
   - Mock Mode: false
   - Exclude Terms: Agent, Thread, Client
   ```

#### å®Ÿè£…æ‰‹é †
1. `scripts/summarize_tokens.py` ä¿®æ­£
   - `--limit` ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¿½åŠ 
   - æŽ¨å®šå‡¦ç†æ™‚é–“è¨ˆç®—ï¼ˆãƒãƒƒãƒæ•° Ã— å¹³å‡å‡¦ç†æ™‚é–“ï¼‰
   - å‡ºåŠ›JSONã«è¿½åŠ æƒ…å ±
2. `.github/workflows/translate.yml` ä¿®æ­£
   - prepare jobã§ `--limit` ã‚’æ¸¡ã™
   - Step Summaryã®ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆæ”¹å–„

### Task 2.3: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ç¢ºèª
**å„ªå…ˆåº¦**: Medium  
**æƒ³å®šæ™‚é–“**: 30åˆ†

#### ç¢ºèªé …ç›®
- [ ] `translate.py`ãŒé€”ä¸­ã§å¤±æ•—ã—ãŸå ´åˆ
  - ã©ã“ã¾ã§å‡¦ç†ã—ãŸã‹ãƒ­ã‚°ã«å‡ºã‚‹ï¼Ÿ
  - `unprocessed.jsonl`ã«å¤±æ•—åˆ†ãŒè¨˜éŒ²ã•ã‚Œã‚‹ï¼Ÿ
- [ ] `replace.py`ãŒé€”ä¸­ã§å¤±æ•—ã—ãŸå ´åˆ
  - ã©ã“ã¾ã§å‡¦ç†ã—ãŸã‹ãƒ­ã‚°ã«å‡ºã‚‹ï¼Ÿ
  - éƒ¨åˆ†çš„ã«ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®æ‰±ã„ã¯ï¼Ÿ

#### æ”¹å–„
- å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§å‡¦ç†å®Œäº†æ™‚ã«å¿…ãšã‚µãƒžãƒªãƒ¼ã‚’å‡ºåŠ›
- å¤±æ•—æ™‚ã‚‚ã©ã“ã¾ã§å‡¦ç†ã—ãŸã‹ãƒ­ã‚°å‡ºåŠ›

### Task 2.4: .gitignoreæ•´ç†
**å„ªå…ˆåº¦**: Low  
**æƒ³å®šæ™‚é–“**: 5åˆ†

#### ä¸è¦ãªé …ç›®å‰Šé™¤
- `archive/*` â†’ å‰Šé™¤ï¼ˆarchives/ã«çµ±ä¸€ï¼‰
- æ•´ç†ã—ã¦è¦‹ã‚„ã™ã

## ðŸ”„ å®Ÿè¡Œé †åº

1. **ç¾çŠ¶èª¿æŸ»** (Task 2.3) - 10åˆ†
2. **log_utils.pyä½œæˆ** (Task 2.1) - 20åˆ†
3. **å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¸ã®é©ç”¨** (Task 2.1) - 30åˆ†
4. **summarize_tokens.pyæ‹¡å¼µ** (Task 2.2) - 30åˆ†
5. **ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¿®æ­£** (Task 2.2) - 30åˆ†
6. **.gitignoreæ•´ç†** (Task 2.4) - 5åˆ†
7. **å‹•ä½œç¢ºèª** - 20åˆ†
8. **ã‚³ãƒŸãƒƒãƒˆ** - 5åˆ†

**åˆè¨ˆæƒ³å®šæ™‚é–“**: ç´„2.5æ™‚é–“

## âœ… å®Œäº†æ¡ä»¶

- [ ] ã™ã¹ã¦ã®ãƒ­ã‚°ãŒçµ±ä¸€ã•ã‚ŒãŸãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆã§å‡ºåŠ›ã•ã‚Œã‚‹
- [ ] ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ã«%è¡¨ç¤ºãŒè¿½åŠ ã•ã‚Œã‚‹
- [ ] ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ‰¿èªç”»é¢ã«å®Ÿè¡Œäºˆå®šæƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚¨ãƒ©ãƒ¼æ™‚ã«é€²æ—çŠ¶æ³ãŒåˆ†ã‹ã‚‹
- [ ] .gitignoreãŒæ•´ç†ã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ†ã‚¹ãƒˆãŒé€šã‚‹

## ðŸ“‹ æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚º

Phase 2å®Œäº†å¾Œ:
- Phase 3: ã‚³ãƒ¼ãƒ‰å“è³ªå‘ä¸Šï¼ˆé‡è¤‡ã‚³ãƒ¼ãƒ‰å‰Šæ¸›ï¼‰
- Phase 4: ãƒ†ã‚¹ãƒˆã®å……å®Ÿ
- Phase 5: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæœ€å°é™æ•´å‚™
