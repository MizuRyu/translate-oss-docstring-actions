# Planning ドキュメント

## フェーズ構成
1. 抽出基盤セットアップ
   - プロジェクト設定、依存関係（libcstなど）をuvで管理
   - CLI/モジュールのエントリポイント設計
2. 抽出処理実装
   - ファイル探索→libcst解析→抽出レコード生成→JSONL書き込み
   - オプションでprint/loggerメッセージ抽出を切り替え可能に
3. 翻訳モックと再適用フロー
   - JSONLレコードに翻訳後テキストを追加するモック処理
   - 元ファイルへ戻すためのマッピングロジックの下準備
4. 観測性とGitHub Actions対応
   - 実行統計ログ出力（ファイル数、抽出件数、文字数、処理時間）
   - GitHub Actionsジョブ設計（後続タスク）

## 作業方針
- 関数指向で細かい処理を分割し、テストしやすくする
- 設定値（検索パス、除外パターン、並列度など）はCLI引数＋設定ファイルで外出し可能に
- 並列処理は最初から抽象化し、逐次実行と切り替えられるようにする
- JSONLレコード設計は早期に固定し、翻訳・復元タスクで使い回す

## リスクと対応策
- libcst解析コスト: ファイルサイズが大きい場合の遅延 → 並列度制御とフィルタリングで軽減
- JSONL肥大化: ファイル分割オプションを初期設計に含めておく
- 復元時の位置ズレ: CSTノードの位置情報をレコードに持たせ、検証テストを用意
